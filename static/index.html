<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Asystent AI</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Rubik+Mono+One&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
</head>
<body>
    <div id="app-container">
        <!-- Panel boczny z historiƒÖ rozm√≥w -->
        <!DOCTYPE html>
        <html lang="pl">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Mordzix AI Platforma</title>
            <link rel="stylesheet" href="style.css">
            <style>
                body { font-family: system-ui, sans-serif; background: #181c20; color: #f2f2f2; margin: 0; }
                header { background: #23272e; padding: 24px 0 12px 0; text-align: center; box-shadow: 0 2px 8px #0002; }
                h1 { margin: 0; font-size: 2.2rem; letter-spacing: 2px; }
                nav { margin: 24px 0 0 0; display: flex; justify-content: center; gap: 24px; }
                nav button { background: #23272e; color: #f2f2f2; border: none; padding: 12px 28px; font-size: 1.1rem; border-radius: 8px 8px 0 0; cursor: pointer; transition: background 0.2s; }
                nav button.active, nav button:hover { background: #2e3440; color: #fff; }
                main { max-width: 900px; margin: 32px auto; background: #23272e; border-radius: 12px; box-shadow: 0 4px 32px #0004; padding: 32px; min-height: 400px; }
                .tab-content { display: none; }
                .tab-content.active { display: block; }
                footer { text-align: center; color: #888; margin: 48px 0 16px 0; font-size: 0.95rem; }
                @media (max-width: 700px) { main { padding: 12px; } nav button { padding: 8px 10px; font-size: 1rem; } }
            </style>
        </head>
        <body>
            <header>
                <h1>Mordzix AI Platforma</h1>
                <nav>
                    <button class="tab-btn active" data-tab="chat">Chat</button>
                    <button class="tab-btn" data-tab="crypto">Crypto</button>
                    <button class="tab-btn" data-tab="travel">Travel</button>
                    <button class="tab-btn" data-tab="writing">Pisanie</button>
                    <button class="tab-btn" data-tab="profile">Profil</button>
                </nav>
            </header>
            <main>
                <section id="tab-chat" class="tab-content active">
                    <h2>Chat AI</h2>
                    <p>Rozmawiaj z Mordzixem ‚Äì Twoim asystentem AI bez kaga≈Ñca. Wsparcie dla kodu, nauki, biznesu, kreatywno≈õci i wiƒôcej.</p>
                    <textarea id="chat-input" rows="3" style="width:100%;margin:12px 0;resize:vertical;"></textarea>
                    <button onclick="sendChat()">Wy≈õlij</button>
                    <div id="chat-log" style="margin-top:24px;max-height:300px;overflow-y:auto;"></div>
                </section>
                <section id="tab-crypto" class="tab-content">
                    <h2>Crypto</h2>
                    <p>Monitoruj kursy, analizuj portfele, generuj alerty i raporty. Integracja z <b>crypto_advisor_full</b>.</p>
                    <div id="crypto-content">(Funkcjonalno≈õƒá w przygotowaniu)</div>
                </section>
                <section id="tab-travel" class="tab-content">
                    <h2>Travel</h2>
                    <p>Planuj podr√≥≈ºe, trasy, hotele i atrakcje z AI. Integracja z <b>travelguide</b>.</p>
                    <div id="travel-content">(Funkcjonalno≈õƒá w przygotowaniu)</div>
                </section>
                <section id="tab-writing" class="tab-content">
                    <h2>Pisanie</h2>
                    <p>Generuj artyku≈Çy, blogi, opowiadania, SEO i wiƒôcej. Integracja z <b>writing_all_pro</b>.</p>
                    <div id="writing-content">(Funkcjonalno≈õƒá w przygotowaniu)</div>
                </section>
                <section id="tab-profile" class="tab-content">
                    <h2>Profil</h2>
                    <p>Twoje dane, statystyki, personalizacja i ustawienia AI.</p>
                    <div id="profile-content">(Funkcjonalno≈õƒá w przygotowaniu)</div>
                </section>
            </main>
            <footer>
                &copy; 2025 Mordzix AI &mdash; Platforma stworzona przez ziomka dla ziomk√≥w.<br>
                <span style="font-size:0.9em;">Wersja: <span id="app-version">(≈Çadowanie...)</span></span>
            </footer>
            <script>
                // Zak≈Çadki
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
                        btn.classList.add('active');
                        document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
                    });
                });
                // Chat demo (frontend-only)
                function sendChat() {
                    const input = document.getElementById('chat-input');
                    const log = document.getElementById('chat-log');
                    if (!input.value.trim()) return;
                    const userMsg = `<div style='color:#8cf'>Ty: ${input.value}</div>`;
                    log.innerHTML += userMsg;
                    setTimeout(() => {
                        log.innerHTML += `<div style='color:#ffb'>Mordzix: <i>To jest przyk≈Çadowa odpowied≈∫ AI.</i></div>`;
                        log.scrollTop = log.scrollHeight;
                    }, 600);
                    input.value = '';
                }
                // Wersja z backendu (je≈õli API dostƒôpne)
                fetch('/version').then(r=>r.json()).then(d=>{
                    document.getElementById('app-version').textContent = d.version || 'dev';
                }).catch(()=>{
                    document.getElementById('app-version').textContent = 'dev';
                });
            </script>
        </body>
        </html>

        <!-- G≈Ç√≥wny kontener czatu -->
        <div id="chat-container">
            <!-- G√≥rny pasek nawigacyjny -->
            <header id="top-bar">
                <div class="left">
                    <button id="btn-new" class="graffiti-btn">Nowa rozmowa</button>
                    <button id="btn-history" class="graffiti-btn">Historia</button>
                    <button id="btn-maps" class="graffiti-btn">Mapy</button>
                    <button id="btn-search" class="graffiti-btn">Wyszukaj wiedzƒô</button>
                </div>
                <div class="right">
                    <button id="tts-toggle" class="graffiti-btn" title="G≈Ços asystenta">üîä</button>
                    <span id="status-dot" title="Status po≈ÇƒÖczenia">‚óè</span>
                </div>
            </header>

            <!-- Obszar wiadomo≈õci -->
            <div id="chat-messages">
                <div id="messages"></div>
                <div id="typing-indicator">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>

            <!-- Obszar plik√≥w do wys≈Çania -->
            <div id="file-preview-area"></div>

            <!-- Obszar wprowadzania wiadomo≈õci -->
            <div id="input-area">
                <button id="mic-button" aria-label="Nagrywaj">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" fill="currentColor"/>
                        <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" fill="currentColor"/>
                    </svg>
                </button>
                <div id="message-input-container">
                    <textarea 
                        id="message-input" 
                        placeholder="Napisz wiadomo≈õƒá..." 
                        rows="1" 
                        autofocus
                    ></textarea>
                    <label for="file-input" id="file-button">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5 6l-8.4 8.4c-1.2 1.2-1.2 3.1 0 4.2 1.2 1.2 3.1 1.2 4.2 0l9.4-9.4c2-2 2-5.1 0-7.1-2-2-5.1-2-7.1 0l-9.4 9.4c-2.7 2.7-2.7 7.2 0 9.9 2.7 2.7 7.2 2.7 9.9 0L21 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <input type="file" id="file-input" multiple>
                    </label>
                </div>
                <button id="send-button" aria-label="Wy≈õlij">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // iOS dynamic viewport height fix
        function setVh() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        window.addEventListener('resize', setVh);
        window.addEventListener('orientationchange', setVh);
        document.addEventListener('DOMContentLoaded', setVh);
    </script>
    <script src="/static/script.js"></script>
</body>
</html>
